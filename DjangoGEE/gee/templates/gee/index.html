{# templates/gee/index.html #}
{% extends "base.html" %}

{% block content %}
<div class="container mt-4">

  <!-- Map Controls -->
  <div class="card mb-4">
    <div class="card-header bg-primary text-white">
      <h5 class="mb-0">Map Controls</h5>
    </div>
    <div class="card-body">
      <form method="GET" class="row g-3">
        <!-- lat/lon & dates as before... -->
      </form>
    </div>
  </div>

  <!-- Satellite Map -->
  <div class="card mb-4">
    <div class="card-header bg-success text-white">
      <h5 class="mb-0">Satellite Map</h5>
    </div>
    <div class="card-body p-0">
      <div id="map-container" style="width:100%; height:400px;">
        {{ map_html|safe }}
      </div>
    </div>
  </div>

  <!-- Prediction Status -->
  {% if prediction_status %}
    <div class="alert {% if 'Error' in prediction_status %}alert-danger{% else %}alert-success{% endif %} mb-4">
      {{ prediction_status }}
    </div>
  {% endif %}

  <!-- Prediction Results -->
  {% if prediction_plot %}
    <div class="card mb-4">
      <div class="card-header bg-info text-white">
        <h5 class="mb-0">Land Cover Prediction Results</h5>
      </div>
      <div class="card-body text-center">
        <img src="data:image/png;base64,{{ prediction_plot }}"
             class="img-fluid" alt="Prediction Results">
      </div>
    </div>
  {% endif %}

  <!-- Land Cover Legend -->
  <div class="card mb-4">
    <div class="card-header bg-secondary text-white">
      <h5 class="mb-0">Land Cover Legend</h5>
    </div>
    <div class="card-body">
      <ul class="list-group">
        {% for name, hexcolor in classifications.items %}
          <li class="list-group-item d-flex align-items-center">
            <span
              style="
                display:inline-block;
                width:20px;
                height:20px;
                background-color:#{{ hexcolor }};
                margin-right:8px;
                border:1px solid #ccc;
              "
            ></span>
            {{ name }}
          </li>
        {% endfor %}
      </ul>
    </div>
  </div>

</div>

<script>
  // Leaflet click â†’ form fields (same as before)
</script>
{% endblock %}
